---
import Layout from "../layouts/Layout.astro";
import CategoryCard from "../components/CategoryCard.astro";
import { fetchData } from "../services/fetchData";
import { type Product } from "../services/types";
import ProductCard from "../components/ProductCard.astro";
import InfoCard from "@/components/InfoCard.astro";
import Faq from "@/components/Faq";

const promotions = await fetchData("getAllProducts");
---

<Layout title="Bienvenido a VIGI | Tienda Online de articulos de seguridad para el hogar">
  <main class="px-4 pb-4 sm:px-8 sm:pb-8 max-w-[1180px] m-auto">
    <div>
      <img class="rounded-b shadow-md shadow-primary" src="/carrusel1.jpg" alt="pricipal_banner">
    </div>
    <!-- <div class="my-5 sm:py-5 sm:w-[550px] lg:w-[600px] 2xl:w-[750px]">
      <h1 class="text-primary font-bold my-1 text-xl sm:text-4xl 2xl:text-5xl">
        Tienda online. <span class="text-black font-normal"
          >Compra seguro tus artículos de seguridad.</span
        >
      </h1>
    </div> -->
    
    <section
      class="grid grid-cols-2 place-items-center gap-5 sm:grid-cols-4 xl:grid-cols-8 sm:mt-16 sm:mb-10"
    >
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/interior.png"
        title="Interior"
      />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/exterior.png"
        title="Exterior"
      />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/bateria.png"
        title="Batería"
      />
      <CategoryCard image_path="/categories/DVR.png" title="DVR" />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/analogas.png"
        title="Análogas"
      />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/porteros.png"
        title="Porteros"
      />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/alarmas.png"
        title="Alarmas"
      />
      <CategoryCard
        image_path="https://d1dg60jlo0321c.cloudfront.net/categories/almacenamiento.png"
        title="Almacenamiento"
      />
    </section>

    <div class="my-2 sm:py-5 sm:w-[550px] lg:w-[600px] 2xl:w-[750px]">
      <h2
        class="text-primary font-bold my-10 text-base sm:text-2xl 2xl:text-3xl"
      >
        Destacados. <span class="text-black font-normal">
          El mejor precio por el mejor producto.</span
        >
      </h2>
    </div>

    <section class="flex gap-5 overflow-x-scroll mb-16 py-4">
      {
        promotions.map((product: Product) => (
          <ProductCard product={product}/>
        ))
      }
    </section>
    
    <section class="w-full grid grid-cols-1 sm:grid-cols-3 place-items-center gap-x-2 my-24">
      <InfoCard icon="truck" title="Envíos a todo el país" description="Gratis a partir de 200,000" />
      <InfoCard icon="card" title="Todos los medios de pago" description="Descuentos en efectivo" />
      <InfoCard icon="mail" title="Seguimiento de tu compra" description="Elige cualquier medio" />
    </section>
  </main>

  <div class="banner flex flex-col justify-center items-start">
    <div class="w-full flex justify-between p-4 sm:p-8 max-w-[1180px] m-auto">
      <h5 class="text-white sm:text-2xl text-balance">Hoy, tu seguridad al alcance de tus manos.</h5>
    </div>
  </div>

  <section id="faq" class="p-4 sm:p-8 max-w-[1180px] m-auto">
    <div class="my-2 sm:py-5 sm:w-[550px] lg:w-[600px] 2xl:w-[750px] ">
      <h2
        class="text-primary font-bold my-10 text-base sm:text-2xl 2xl:text-3xl"
      >
       Preguntas frecuentes. <span class="text-black font-normal">
        Si necesitas ayuda adicional, puedes ponerte en contacto con soporte.</span
        >
      </h2>
    </div>
    <Faq client:visible />
  </section>
  <script>
    import { check } from "@/store/cartStore";

    const token = document.cookie.split('=');

    if(token != null){
      check.set(token[1])
    }
  </script>
</Layout>


<style>
  .banner {
    background-image: url('/banner1.webp');
    background-size: cover;
    background-position: center;
    height: 300px;
    width: 100%;
  }
</style>
